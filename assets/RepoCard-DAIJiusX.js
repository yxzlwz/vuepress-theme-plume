import{v as S,s as _,M as v,h as b,x as B,g as x,N as k,k as G,o as d,w as N,c as h,l as m,q as t,m as z,e as a,n as y,t as r,O as D,P as E,a as F}from"./app-CK6GAGby.js";const $=S("__VUEPRESS_GITHUB_REPO__",{});function O(n,c){const p=_(()=>{const[i="",u=""]=v(n).split("/");return{owner:i,name:u}}),e=_(()=>v(c)??"github"),l=b(null),s=b(!1);async function R(){const{owner:i,name:u}=v(p);if(!i||!u)return;const g=`${e.value==="github"?"":`${e.value}:`}${i}/${u}`,f=$.value[g];if(f?.info?.name&&Date.now()-f.updatedAt<=864e5){l.value=f.info,s.value=!0;return}s.value=!1;try{const o=await fetch(`https://api.pengzhanbo.cn/${e.value}/repo/${i}/${u}`).then(C=>C.json());s.value=!0,o.convertStars=w(o.stars),o.convertForks=w(o.forks),l.value=o,$.value[g]={info:o,updatedAt:Date.now()}}catch(o){s.value=!0,console.error("github repo error:",o)}}return B(p,R,{immediate:!0}),{data:l,loaded:s}}function w(n){return n<1e3?n:`${(n/1e3).toFixed(1)}k`}const P={class:"repo-name"},T={class:"repo-link"},V=["href","title"],A={class:"repo-desc"},I={class:"repo-info"},L={key:0},U=["title"],j=["title"],q=["title"],H=x({inheritAttrs:!1,__name:"RepoCard",props:{repo:{},fullname:{type:Boolean,default:void 0},provider:{default:"github"}},setup(n){const c=n,{loaded:p,data:e}=O(k(c,"repo"),k(c,"provider"));return(l,s)=>(d(),G(t(E),null,{default:N(()=>[t(p)&&t(e)?.name?(d(),h("div",z({key:0,class:"vp-repo-card"},l.$attrs),[a("p",P,[a("span",{class:y(`vpi-${n.provider}-repo`)},null,2),a("span",T,[a("a",{href:t(e).url,target:"_blank",rel:"noopener noreferrer",class:"no-icon",title:t(e).fullName},r(n.fullname||t(e).ownerType==="Organization"&&typeof n.fullname>"u"?t(e).fullName:t(e).name),9,V)]),a("span",{class:y(["repo-visibility",{archived:t(e).archived}])},r(t(e).visibility+(t(e).template?" Template":""))+r(t(e).archived?" archive":""),3)]),a("p",A,r(t(e).description),1),a("div",I,[t(e).language?(d(),h("p",L,[a("span",{class:"repo-language",style:D({"background-color":t(e).languageColor})},null,4),a("span",null,r(t(e).language),1)])):m("",!0),a("p",{title:`Github Stars: ${t(e).stars}`},[s[0]||(s[0]=a("span",{class:"vpi-github-star"},null,-1)),a("span",null,r(t(e).convertStars),1)],8,U),a("p",{title:`Github Forks: ${t(e).forks}`},[s[1]||(s[1]=a("span",{class:"vpi-github-fork"},null,-1)),a("span",null,r(t(e).convertForks),1)],8,j),t(e).license?(d(),h("p",{key:1,title:`Github License: ${t(e).license.name}`},[s[2]||(s[2]=a("span",{class:"vpi-github-license"},null,-1)),a("span",null,r(t(e).license.name),1)],8,q)):m("",!0)])],16)):m("",!0)]),_:1}))}}),J=F(H,[["__scopeId","data-v-e3b8cb06"]]);export{J as R};
